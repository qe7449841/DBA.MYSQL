**`top` 命令是一个实时显示 Linux 系统上进程活动和系统负载信息的工具。它提供了当前系统状态的动态视图，可以根据用户需求进行多种交互操作以获得更多详细信息。**

### 基本使用

在终端中输入 `top` 命令：

```bash
top
```

启动后，`top` 会显示如下信息：

```
top - 15:17:25 up  5:12,  3 users,  load average: 0.01, 0.05, 0.06
Tasks:  82 total,   2 running,  80 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 98.7 id,  0.3 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem :  4046788 total,  3027368 free,   343680 used,   675740 buff/cache
KiB Swap:  2097148 total,  2097148 free,        0 used.  3510088 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND     
  691 root      20   0  394732  52896  39144 S   0.7  1.3   0:01.01 Xorg        
  863 user      20   0  895168  84416  47536 S   0.3  2.1   0:03.27 gnome-shell 
 1121 user      20   0  629200  24676  19056 S   0.3  0.6   0:01.38 gnome-termi+
  775 user      20   0  642180  30880  23360 S   0.3  0.8   0:02.12 gnome-shell+
 1135 user      20   0  162800   3132   2684 R   0.3  0.1   0:00.15 top         
```

### 返回信息详解

1. **系统信息行**：
   ```
   top - 15:17:25 up  5:12,  3 users,  load average: 0.01, 0.05, 0.06
   ```
   - 当前时间 (`15:17:25`)
   - 系统运行时间 (`up 5:12`)
   - 当前登录用户数 (`3 users`)
   - 系统负载平均值 (`load average: 0.01, 0.05, 0.06`)，分别是过去 1、5、15 分钟的平均负载。

2. **任务信息行**：
   ```
   Tasks:  82 total,   2 running,  80 sleeping,   0 stopped,   0 zombie
   ```
   - 总任务数 (`82 total`)
   - 正在运行的任务数 (`2 running`)
   - 休眠任务数 (`80 sleeping`)
   - 停止的任务数 (`0 stopped`)
   - 僵尸任务数 (`0 zombie`)

3. **CPU 状态行**：
   ```
   %Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 98.7 id,  0.3 wa,  0.0 hi,  0.0 si,  0.0 st
   ```
   - 用户空间占用 CPU 比例 (`0.3 us`)
   - 内核空间占用 CPU 比例 (`0.7 sy`)
   - 用户进程空间内改变过优先级的进程占用 CPU 比例 (`0.0 ni`)
   - 空闲 CPU 比例 (`98.7 id`)
   - 等待 I/O 占用 CPU 比例 (`0.3 wa`)
   - 硬中断占用 CPU 比例 (`0.0 hi`)
   - 软中断占用 CPU 比例 (`0.0 si`)
   - 虚拟化运行其他操作系统占用 CPU 比例 (`0.0 st`)

4. **内存使用行**：
   ```
   KiB Mem :  4046788 total,  3027368 free,   343680 used,   675740 buff/cache
   ```
   - 总内存 (`4046788 total`)
   - 空闲内存 (`3027368 free`)
   - 使用中的内存 (`343680 used`)
   - 缓存和缓冲区内存 (`675740 buff/cache`)

5. **交换空间使用行**：
   ```
   KiB Swap:  2097148 total,  2097148 free,        0 used.  3510088 avail Mem 
   ```
   - 总交换空间 (`2097148 total`)
   - 空闲交换空间 (`2097148 free`)
   - 使用中的交换空间 (`0 used`)
   - 可用内存 (`3510088 avail Mem`)

6. **进程信息**：
   ```
   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND     
   691 root      20   0  394732  52896  39144 S   0.7  1.3   0:01.01 Xorg        
   863 user      20   0  895168  84416  47536 S   0.3  2.1   0:03.27 gnome-shell 
   1121 user      20   0  629200  24676  19056 S   0.3  0.6   0:01.38 gnome-termi+
   775 user      20   0  642180  30880  23360 S   0.3  0.8   0:02.12 gnome-shell+
   1135 user      20   0  162800   3132   2684 R   0.3  0.1   0:00.15 top         
   ```
   - `PID`：进程 ID
   - `USER`：进程所有者
   - `PR`：优先级
   - `NI`：优先级调整值（niceness）
   - `VIRT`：进程占用的虚拟内存总量
   - `RES`：进程占用的常驻内存
   - `SHR`：共享内存大小
   - `S`：进程状态（S=sleeping, R=running, Z=zombie, D=uninterruptible sleep, T=stopped）
   - `%CPU`：CPU 使用率
   - `%MEM`：内存使用率
   - `TIME+`：进程使用的总 CPU 时间
   - `COMMAND`：进程的命令名/路径

### 交互操作

在 `top` 运行期间，可以通过键盘输入进行交互操作来获取更多信息或改变显示内容：

1. **`h` 或 `?`**：显示帮助界面，列出所有可用命令。
2. **`k`**：终止一个进程，提示输入进程 PID 号。
3. **`u`**：按用户名筛选进程。
4. **`P`**：按 CPU 使用率排序。
5. **`M`**：按内存使用率排序。
6. **`N`**：按 PID 排序。
7. **`T`**：按累计 CPU 时间排序。
8. **`r`**：调整进程优先级（重命名）。
9. **`c`**：切换显示命令行全路径。
10. **`1`**：切换显示每个 CPU 核心的使用情况。
11. **`q`**：退出 `top`。

### 示例

- **按用户名筛选进程**：
  按下 `u` 键，然后输入用户名。例如，筛选出所有由用户 `user` 拥有的进程。

- **终止一个进程**：
  按下 `k` 键，然后输入进程 PID 号，最后确认是否要终止该进程。

- **调整进程优先级**：
  按下 `r` 键，然后输入进程 PID 号，接着输入新的优先级（-20 到 19，负数表示更高优先级）。

- **显示每个 CPU 核心的使用情况**：
  按下 `1` 键，可以看到每个 CPU 核心的使用情况。

通过这些交互操作和命令，`top` 可以帮助你更有效地监控和管理系统资源和进程。